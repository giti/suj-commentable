<% commentable_user = controller.send(:commentable_user) -%>
<% if comment.destroyed? -%>
  $("#suj-comment-<%= comment.id -%>").fadeOut(300, function() { $(this).remove(); });
  $("#suj-comment-children-list-<%= comment.id -%>").fadeOut(200, function() { $(this).remove(); });
<% else -%>
  <% if comment.enabled? -%>
    $("#suj-comment-<%= comment.id -%>-text").html("<%= comment.text -%>");
  <% else -%>  
    $("#suj-comment-<%= comment.id -%>-text").html("<%= t('commentable.censored') -%>");
  <% end -%>
  $("#suj-comment-<%= comment.id -%>-controls").replaceWith("<%= escape_javascript(render(:partial => 'suj/commentable/item_controls', :formats => [:html], :locals => { :comment => comment, :commentable_user => commentable_user })) -%>");
<% end -%>
